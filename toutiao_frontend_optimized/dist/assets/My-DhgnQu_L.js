import{u as N}from"./user-D0w_HHS9.js";import{f as V,i as g,h as D,c as m,o as c,a as t,b as e,d as i,q as v,t as u,w as p,e as h,n as M,u as R}from"./index-BjBpr3Ih.js";import{T as U}from"./TabBar-CkY-5Qov.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as f}from"./function-call-BP-lsT-r.js";import{s as F}from"./function-call-D_8_aYSs.js";import"./index-ngrFHoWO.js";import"./api-Cct3C2HD.js";import"./mount-component-LTm6VdL5.js";const H={class:"my-container"},q={class:"avatar"},E={class:"info"},P={class:"username"},A={key:0,class:"desc"},G={key:1,class:"user-info"},J={class:"avatar"},K={class:"info"},O={class:"username"},Q={class:"desc"},W={class:"menu-list"},X={__name:"My",setup(Y){const a=N(),s=R(),{t:l}=V(),y=g(()=>a.userInfo),n=g(()=>a.getLoginStatus),k=g(()=>a.getUserBio||l("profile.bio")),T=()=>{s.push("/login")},b=()=>{s.push("/register")},w=()=>{n.value&&s.push("/profile")},C=()=>{n.value?s.push("/history"):(f(l("common.login")),s.push("/login"))},$=()=>{n.value?s.push("/favorite"):(f(l("common.login")),s.push("/login"))},B=()=>{s.push("/settings")},I=()=>{F({title:l("common.confirm"),message:l("my.logout")+"?",showCancelButton:!0}).then(o=>{o==="confirm"&&(a.logout(),s.push("/login"))})};return D(async()=>{try{await a.getUserInfoDetail()}catch(o){console.error("获取用户信息失败:",o)}}),(o,Z)=>{const L=i("van-nav-bar"),d=i("van-image"),S=i("van-icon"),_=i("van-button"),r=i("van-cell"),j=i("van-cell-group");return c(),m("div",H,[t(L,{title:o.$t("my.title")},null,8,["title"]),n.value?(c(),m("div",{key:0,class:"user-info",onClick:w},[e("div",q,[t(d,{round:"",width:"80",height:"80",src:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg"})]),e("div",E,[e("div",P,u(n.value?y.value.username:o.$t("my.notLoggedIn")),1),n.value?(c(),m("div",A,u(k.value||o.$t("profile.bio")),1)):v("",!0)]),t(S,{name:"arrow",class:"arrow-icon"})])):(c(),m("div",G,[e("div",J,[t(d,{round:"",width:"80",height:"80",src:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg"})]),e("div",K,[e("div",O,u(o.$t("my.notLoggedIn")),1),e("div",Q,[t(_,{type:"primary",size:"small",onClick:T,style:{"margin-right":"10px"}},{default:p(()=>[h(u(o.$t("my.goToLogin")),1)]),_:1}),t(_,{type:"info",size:"small",onClick:b},{default:p(()=>[h(u(o.$t("my.goToRegister")),1)]),_:1})])])])),e("div",W,[t(j,{inset:""},{default:p(()=>[t(r,{title:o.$t("my.myFavorite"),"is-link":"",onClick:$},null,8,["title"]),t(r,{title:o.$t("my.browsingHistory"),"is-link":"",onClick:C},null,8,["title"]),t(r,{title:o.$t("my.notifications"),"is-link":""},null,8,["title"]),t(r,{title:o.$t("my.settings"),"is-link":"",onClick:B},null,8,["title"]),n.value?(c(),M(r,{key:0,title:o.$t("my.logout"),onClick:I},null,8,["title"])):v("",!0)]),_:1})]),t(U)])}}},ro=z(X,[["__scopeId","data-v-0f379dbb"]]);export{ro as default};
