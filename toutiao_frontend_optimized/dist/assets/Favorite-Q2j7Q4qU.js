import{h as F,c as i,o as a,a as l,n as b,d as c,p as v,F as x,k as B,u as D,w as L,b as o,q as N,t as r}from"./index-BjBpr3Ih.js";import{u as A}from"./favorite-MgVCp6Qh.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as u}from"./function-call-D_8_aYSs.js";import"./index-ngrFHoWO.js";import"./user-D0w_HHS9.js";import"./api-Cct3C2HD.js";import"./mount-component-LTm6VdL5.js";const T={class:"favorite-container"},V={key:0,class:"favorite-list"},$={class:"news-item"},R={key:0,class:"news-image"},q=["src","alt"],z={class:"news-info"},E={class:"news-title"},I={class:"news-meta"},M={__name:"Favorite",setup(j){const _=D(),s=A(),d=()=>{_.back()},m=e=>{_.push(`/news/detail/${e}`)},p=async e=>{(await s.removeFavoriteApi(e)).success&&s.removeFavorite(e)},f=e=>{u({title:"提示",message:"确定要删除这条收藏吗？",showCancelButton:!0}).then(n=>{n==="confirm"&&p(e)})},h=async()=>{u({title:"提示",message:"确定要清空所有收藏吗？",showCancelButton:!0}).then(async e=>{if(e==="confirm"){const n=await s.clearFavoritesApi();(!n||!n.success)&&console.log("清空收藏列表")}})};return F(async()=>{try{const e=await s.getFavoriteListApi();(!e||!e.success)&&console.log("从本地存储加载收藏列表")}catch{s.loadFavorites()}}),(e,n)=>{const g=c("van-nav-bar"),k=c("van-cell"),w=c("van-button"),C=c("van-empty");return a(),i("div",T,[l(g,{title:"我的收藏","left-text":"返回","left-arrow":"",onClickLeft:d,"right-text":"清空",onClickRight:h,fixed:""}),v(s).getFavorites.length?(a(),i("div",V,[(a(!0),i(x,null,B(v(s).getFavorites,t=>(a(),i("div",{class:"favorite-item",key:t.id},[l(k,{onClick:y=>m(t.id),border:!1},{title:L(()=>[o("div",$,[t.image?(a(),i("div",R,[o("img",{src:t.image,alt:t.title},null,8,q)])):N("",!0),o("div",z,[o("div",E,r(t.title),1),o("div",I,[o("span",null,r(t.author),1),o("span",null,r(t.publishTime),1),o("span",null,"收藏时间: "+r(t.favoriteTime),1)])])])]),_:2},1032,["onClick"]),l(w,{class:"delete-btn",type:"danger",size:"mini",icon:"cross",onClick:y=>f(t.id)},null,8,["onClick"])]))),128))])):(a(),b(C,{key:1,description:"暂无收藏内容"}))])}}},W=S(M,[["__scopeId","data-v-ac892b87"]]);export{W as default};
